<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>FAQ • LakeEnsemblR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="FAQ">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">LakeEnsemblR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.9</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Get started</h6></li>
    <li><a class="dropdown-item" href="../articles/lakeensemblr-overview.html">LakeEnsemblR: Basic Use and Sample Applications</a></li>
    <li><a class="dropdown-item" href="../articles/setting-up-lakeensemblr.html">Setting up LakeEnsemblR</a></li>
    <li><a class="dropdown-item" href="../articles/running-lakeensemblr.html">Running LakeEnsemblR</a></li>
    <li><a class="dropdown-item" href="../articles/running-lakeensemblr-in-parallel.html">Running LakeEnsemblR in parallel</a></li>
    <li><a class="dropdown-item" href="../articles/post-processing-lakeensemblr.html">Post-processing LakeEnsemblR</a></li>
    <li><a class="dropdown-item" href="../articles/calibrating-lakeensemblr.html">Calibrating LakeEnsemblR</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Installation</h6></li>
    <li><a class="dropdown-item" href="../articles/docker.html">Docker</a></li>
    <li><a class="dropdown-item" href="../articles/installation-issues.html">Installation issues</a></li>
    <li><a class="dropdown-item" href="../articles/faq.html">FAQ</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Other</h6></li>
    <li><a class="dropdown-item" href="../articles/what-is-a-netcdf-file.html">What is a NetCDF file</a></li>
    <li><a class="dropdown-item" href="../articles/lake-models.html">Lake Models</a></li>
    <li><a class="dropdown-item" href="../articles/package-structure.html">Package structure</a></li>
    <li><a class="dropdown-item" href="../articles/from-v1-0-to-v1-1-changes.html">From v1.0 to v1.1 changes</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/aemon-j/LakeEnsemblR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>FAQ</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/aemon-j/LakeEnsemblR/blob/main/vignettes/articles/faq.Rmd" class="external-link"><code>vignettes/articles/faq.Rmd</code></a></small>
      <div class="d-none name"><code>faq.Rmd</code></div>
    </div>

    
    
<p><strong>Why does FLake not simulate the full depth of the
lake?</strong></p>
<ul>
<li>FLake assumes a rectangular shape of the basin and does not use the
hypsograph file. The assumptions of FLake match best when using the mean
depth of the lake. This is calculated from the hypsograph file inside
<em>export_location</em>. So shallower depth of FLake is intended.</li>
<li>Should you really wish to simulate the full depth of the lake, you
can add “depth_w_lk:” to the “FLake” section of the “model_parameters”
section in the LER config file, with the maximum depth of the lake.</li>
</ul>
<p><strong>Why am I getting the error “Error in
get_meteo_time_step(…):Meteo file has irregular time
steps!”?</strong></p>
<ul>
<li>This error is thrown if the program registers irregular time steps
in your meteo file. It would be good to check if this is indeed the
case, but it can also be caused by not using the datetime format
<em>yyyy-mm-dd HH:MM:SS</em>, in which case R reads the date in an
incorrect manner.</li>
<li>On many computers, Microsoft Excel is used as default when opening
.csv files. Some versions of Excel automatically convert <em>yyyy-mm-dd
HH:MM:SS</em> to <em>dd/mm/yyyy HH:MM</em>, which can cause this error.
This can either be fixed <strong>a)</strong> in Excel by right-clicking
the datetime cells, going to “Format Cells”, and then entering in the
“Type” box: yyyy-mm-dd hh:mm:ss (this needs to be done every time
opening the file in Excel and will be your local timezone) or
<strong>b)</strong> by not using Excel and opening your input files in R
or a text editor.</li>
<li>Another common reason for this error is the absence of leap years.
Some weather models give output always in 365 days a year without
considering leap years, which will result in this error. So you would
need to insert the missing leap days and fill in the missing forcing
data on those dates (for example by interpolation).</li>
</ul>
<p><strong>What parameters can I enter in the model_parameters section
of the LakeEnsemblR config file?</strong></p>
<ul>
<li>You can specify any parameter that occurs in the model-specific
configuration file of that model (check the model-specific directories).
Functions inside LER will try to find the line where this parameter
occurs and replace the value by the value you requested.</li>
<li>You can either add one keyword, or two, split by “/” (e.g.
“turb_params/k_min”). The first keyword is used to look for the section
in which the parameter occurs, which can come in handy if the same
parameter occurs in multiple sections.</li>
<li>It is not yet possible to enter more than two keywords.</li>
<li>A warning is thrown if the parameter cannot be found.</li>
</ul>
<p><strong>Can I enter a light-extinction coefficient (Kw) that varies
over time?</strong></p>
<ul>
<li>Yes, you can either add a value (i.e. constant over time) or a file
name, in which you can vary Kw over time. Type
<em>LakeEnsemblR::get_template(“Light extinction”)</em> to get the right
format.</li>
</ul>
<p><strong>Can my outflow be different from my inflow?</strong></p>
<ul>
<li>This was not possible in version 1.0 of LER. You could manually
change the values of in- and outflow in the model-specific directories,
but LER did not assist in this.</li>
<li>In version 1.1 of LER, you can now vary inflows and outflows
independently from each other. For more information, see <a href="articles/from-v1-0-to-v1-1-changes.html">this article</a>.</li>
</ul>
<p><strong>How do I add additional members to my netcdf
file?</strong></p>
<ul>
<li>When you call <em>run_ensemble</em>, add the argument <em>add =
TRUE</em>. This will add the run to the existing netcdf as a new
member.</li>
</ul>
<p><strong>Why do I get the error “Error in master_config config_files:
subscript out of bounds”?</strong></p>
<ul>
<li>This is most likely due to an error in the yaml-format of the LER
configuration file. You can’t use tabs in a yaml file, and the
indentation needs to be consistent (in the LER template, three spaces
per “level” are used). You can check if this is the case by running
configr::read.config(config_file). If this returns “FALSE”, something is
wrong in the yaml format.</li>
<li>If this is the case, search for use of tabs (although you should
receive a warning that tabs occur when running export_config), or an
inconsistent use of spacing. A relatively easy way to locate the issue
is to comment out the whole yaml file (in Notepad, right-click and click
“Block comment”). Then start from the top, uncomment one section at a
time, and try to run configr::read.config(config_file). The section
where it starts to return “FALSE”, is the section where the issue
is.</li>
</ul>
<p><strong>Why do I get the error “Error in signif(deps, 4) :
non-numeric argument to mathematical function”?</strong></p>
<ul>
<li>This could be caused by using the wrong headers in your initial
temperature profile file. Ensure the file is in .csv format and has the
headers <code>Depth_meter, Water_Temperature_celsius</code>
</li>
</ul>
<p><strong>Why is my MyLake run failing?</strong></p>
<ul>
<li>An example of an error message is: “Error in polyroot(c(a, b, c)) :
invalid polynomial coefficient”</li>
<li>For some combinations of parameters, MyLake can become unstable and
crash. While it is sometimes hard to figure out what makes it unstable,
we found that especially the C_shelter parameter is rather sensitive.
Automatic calculation of C_shelter could lead to unstable calculations.
As an initial guess, you could try to use a value of 0.15, by adding to
the MyLake part of the “model_parameters” section in the LER config file
“Phys.par/C_shelter: 0.15”</li>
</ul>
<p><strong>Simstrat runs well, but occasionally becomes instable and
simulates extremely high or low temperatures. What can I
do?</strong></p>
<ul>
<li>If you plot the results of Simstrat, the high maximum and low
minimum values can cause an almost unicoloured plot.</li>
<li>The maintainer of the Simstrat code, Fabian Baerenbold, advises to
use a small time step for Simstrat when using in-/outflows, potentially
smaller than for other models.<br>
Usually 5 minutes (300 seconds) is enough, but sometimes an even shorter
time step is required. To do this in LakeEnsemblR, you can add
<code>Simulation/Timestep s: 300</code> to the Simstrat part of the
“model_parameters” section of the configuration file before running
<code>export_config</code>.</li>
</ul>
<p><strong>My setup was working well, but I get errors after updating to
version 1.1 (March 2022). What should I do?</strong></p>
<ul>
<li>If you want to use the new version, please don’t forget to also
reinstall the model-specific packages (GLM3r, SimstratR, etc.) and to
use a LER config file that corresponds to the new template, e.g.
<code>get_template(“LakeEnsemblR_config”)</code>. More information can
be found on this <a href="articles/from-v1-0-to-v1-1-changes.html">article</a>.</li>
<li>If you would like to keep using the old version, please also have a
look at the this <a href="articles/from-v1-0-to-v1-1-changes.html">article</a> for
instructions.</li>
<li>If you are still experiencing problems, don’t hesitate to create a
new Issue on this GitHub.</li>
</ul></main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tadhg Moore, Robert Ladwig, Johannes Feldbauer, Jorrit Mesman.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
